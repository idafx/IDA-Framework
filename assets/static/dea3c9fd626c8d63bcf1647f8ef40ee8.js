
eval(function(p,a,c,k,e,d){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('3.X=a(h){h=3.J({v:D,C:D,u:D},h);k(h.v){$.W({t:\'V\',v:h.v,C:h.C,U:\'4\',u:a(4){d f=j B(4);k(3.T(h.u))h.u(f)}})}};a B(4){k(4)2.K(4)};B.r={t:\'\',l:\'\',c:\'\',b:\'\',g:\'\',K:a(4){k(3(\'8\',4).y==1){2.t=\'x\';d s=j z(4)}H k(3(\'f\',4).y==1){2.t=\'S\';d s=j A(4)}k(s)3.J(2,s)}};a o(){};o.r={c:\'\',b:\'\',g:\'\',i:\'\',n:\'\'};a A(4){2.q(4)};A.r={q:a(4){d 8=3(\'f\',4).9(0);2.l=\'1.0\';2.c=3(8).5(\'c:e\').6();2.b=3(8).5(\'b:e\').p(\'I\');2.g=3(8).5(\'R:e\').6();2.w=3(8).p(\'4:Q\');2.i=3(8).5(\'i:e\').6();2.m=j G();d f=2;3(\'P\',4).F(a(){d 7=j o();7.c=3(2).5(\'c\').9(0).6();7.b=3(2).5(\'b\').9(0).p(\'I\');7.g=3(2).5(\'O\').9(0).6();7.i=3(2).5(\'i\').9(0).6();7.n=3(2).5(\'n\').9(0).6();f.m.E(7)})}};a z(4){2.q(4)};z.r={q:a(4){k(3(\'x\',4).y==0)2.l=\'1.0\';H 2.l=3(\'x\',4).9(0).p(\'l\');d 8=3(\'8\',4).9(0);2.c=3(8).5(\'c:e\').6();2.b=3(8).5(\'b:e\').6();2.g=3(8).5(\'g:e\').6();2.w=3(8).5(\'w:e\').6();2.i=3(8).5(\'N:e\').6();2.m=j G();d f=2;3(\'7\',4).F(a(){d 7=j o();7.c=3(2).5(\'c\').9(0).6();7.b=3(2).5(\'b\').9(0).6();7.g=3(2).5(\'g\').9(0).6();7.i=3(2).5(\'M\').9(0).6();7.n=3(2).5(\'L\').9(0).6();f.m.E(7)})}};',60,60,'||this|jQuery|xml|find|text|item|channel|eq|function|link|title|var|first|feed|description|options|updated|new|if|version|items|id|JFeedItem|attr|_parse|prototype|feedClass|type|success|url|language|rss|length|JRss|JAtom|JFeed|data|null|push|each|Array|else|href|extend|parse|guid|pubDate|lastBuildDate|content|entry|lang|subtitle|atom|isFunction|dataType|GET|ajax|getFeed'.split('|')));$.fn.delay=function(time,name){return this.queue((name||"fx"),function(){var self=this;setTimeout(function(){$.dequeue(self);},time);});};jQuery.rss=function(vars){vars=jQuery.extend({url:null,target:null},vars)
if(vars.url==null)
{this.append("Error: RSS url parameter invalid")
return}
if(vars.target==null)
{this.append("Error: report target selector parameter invalid")
return}
$.getFeed({url:vars.url,success:function(feed){var html="<h2><a href="+feed.link+">"+feed.title+"</a></h2>";for(var i=0;i<feed.items.length&&i<5;i++){var item=feed.items[i];html+='<div class="rss-news-new" style="visiblity:hidden">'
html+="<h3><a href="+item.link+">"+item.title+"</a></h3>";html+="<span class=updated>"+item.updated+"</span>";html+="<p>"+item.description+"</p>";html+='</div>';}
$(vars.target).html(html)
$(vars.target+' .rss-news-new').each(function(){$(this).delay(1000).fadeIn('slow')})}})};var Mapifies;if(!Mapifies)Mapifies={};Mapifies.MapObjects={};Mapifies.MapObjects.Set=function(element,options){var mapName=jQuery(element).attr('id');var thisMap=new GMap2(element);Mapifies.MapObjects[mapName]=thisMap;Mapifies.MapObjects[mapName].Options=options;return Mapifies.MapObjects[mapName];};Mapifies.MapObjects.Append=function(element,description,appending){var mapName=jQuery(element).attr('id');Mapifies.MapObjects[mapName][description]=appending;};Mapifies.MapObjects.Get=function(element){return Mapifies.MapObjects[jQuery(element).attr('id')];};Mapifies.Initialise=function(element,options,callback){function defaults(){return{'language':'en','mapType':G_NORMAL_MAP,'mapCenter':[55.958858,-3.162302],'mapZoom':12,'mapControl':'small','mapEnableType':false,'mapEnableOverview':false,'mapEnableDragging':true,'mapEnableInfoWindows':true,'mapEnableDoubleClickZoom':false,'mapEnableScrollZoom':false,'mapEnableSmoothZoom':false,'mapEnableGoogleBar':false,'mapEnableScaleControl':false,'mapShowjMapsIcon':true,'debugMode':false};};options=jQuery.extend(defaults(),options);if(GBrowserIsCompatible()){var thisMap=Mapifies.MapObjects.Set(element,options);thisMap.setCenter(new GLatLng(options.mapCenter[0],options.mapCenter[1]),options.mapZoom,options.mapType);if(options.mapShowjMapsIcon){Mapifies.AddScreenOverlay(element,{'imageUrl':'http://hg.digitalspaghetti.me.uk/jmaps/raw-file/3228fade0b3c/docs/images/jmaps-mapicon.png','screenXY':[70,10],'overlayXY':[0,0],'size':[42,25]});}
switch(options.mapControl){case"small":thisMap.addControl(new GSmallMapControl());break;case"large":thisMap.addControl(new GLargeMapControl());break;};if(options.mapEnableType)
thisMap.addControl(new GMapTypeControl());if(options.mapEnableOverview)
thisMap.addControl(new GOverviewMapControl());if(!options.mapEnableDragging)
thisMap.disableDragging();if(!options.mapEnableInfoWindows)
thisMap.disableInfoWindow();if(options.mapEnableDoubleClickZoom)
thisMap.enableDoubleClickZoom();if(options.mapEnableScrollZoom)
thisMap.enableScrollWheelZoom();if(options.mapEnableSmoothZoom)
thisMap.enableContinuousZoom();if(options.mapEnableGoogleBar)
thisMap.enableGoogleBar();if(options.mapEnableScaleControl)
thisMap.addControl(new GScaleControl());if(options.debugMode)
console.log(Mapifies);if(typeof callback=='function')
return callback(thisMap,element,options);}else{jQuery(element).text('Your browser does not support Google Maps.');return false;}
return;};Mapifies.MoveTo=function(element,options,callback){function defaults(){return{'centerMethod':'normal','mapType':null,'mapCenter':[],'mapZoom':null};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var point=new GLatLng(options.mapCenter[0],options.mapCenter[1]);switch(options.centerMethod){case'normal':thisMap.setCenter(point,options.mapZoom,options.mapType);break;case'pan':thisMap.panTo(point);break;}
if(typeof callback=='function')return callback(point,options);};Mapifies.SavePosition=function(element,options,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.savePosition();if(typeof callback=='function')return callback(thisMap);};Mapifies.GotoSavedPosition=function(element,options,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.returnToSavedPosition();if(typeof callback=='function')return callback(thisMap);};Mapifies.CreateKeyboardHandler=function(element,options,callback){var thisMap=Mapifies.MapObjects.Get(element);var keyboardHandler=new GKeyboardHandler(thisMap);if(typeof callback=='function')return callback(keyboardHandler);};Mapifies.CheckResize=function(element,options,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.checkResize();if(typeof callback=='function')return callback(element);};Mapifies.SetMapType=function(element,options,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.setMapType(window[options]);if(typeof callback=='function')return callback(element);}
Mapifies.SearchAddress=function(element,options,callback){function defaults(){return{'query':null,'returnType':'getLatLng','cache':undefined,'countryCode':'uk'};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);if(typeof thisMap.Geocoder==='undefined'){if(typeof options.cache==='undefined'){var geoCoder=new GClientGeocoder();}else{var geoCoder=new GClientGeocoder(cache);}
Mapifies.MapObjects.Append(element,'Geocoder',geoCoder);thisMap=Mapifies.MapObjects.Get(element);}
thisMap.Geocoder[options.returnType](options.query,function(result){if(typeof callback==='function'){return callback(result,options);}});return;};Mapifies.SearchDirections=function(element,options,callback){function defaults(){return{'query':null,'panel':null,'locale':'en_GB','travelMode':'driving','avoidHighways':false,'getPolyline':true,'getSteps':true,'preserveViewport':false,'clearLastSearch':false};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var queryOptions={'locale':options.locale,'travelMode':options.travelMode,'avoidHighways':options.avoidHighways,'getPolyline':options.getPolyline,'getSteps':options.getSteps,'preserveViewport':options.preserveViewport};var panel=$(options.panel).get(0);if(typeof thisMap.Directions==='undefined'){Mapifies.MapObjects.Append(element,'Directions',new GDirections(thisMap,panel));}
GEvent.addListener(thisMap.Directions,"load",onLoad);GEvent.addListener(thisMap.Directions,"error",onError);if(options.clearLastSearch){thisMap.Directions.clear();}
thisMap.Directions.load(options.query,queryOptions);function onLoad(){if(typeof callback=='function')return callback(thisMap.Directions,options);}
function onError(){if(typeof callback=='function')return callback(thisMap.Directions,options);}
return;};Mapifies.CreateAdsManager=function(element,options,callback){function defaults(){return{'publisherId':'','maxAdsOnMap':3,'channel':0,'minZoomLevel':6}};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var adsOptions={'maxAdsOnMap':options.maxAdsOnMap,'channel':options.channel,'minZoomLevel':options.minZoomLevel}
if(typeof thisMap.AdsManager=='undefined'){Mapifies.MapObjects.Append(element,'AdsManager',new GAdsManager(thisMap,options.publisherId,adsOptions));}
if(typeof callback=='function')return callback(thisMap.AdsManager,options);};Mapifies.AddFeed=function(element,options,callback){function defaults(){return{'feedUrl':null,'mapCenter':[]};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var feed=new GGeoXml(options.feedUrl);thisMap.addOverlay(feed);if(options.mapCenter[0]&&options.mapCenter[1])
thisMap.setCenter(new GLatLng(options.mapCenter[0],options.mapCenter[1]));if(typeof callback=='function')return callback(feed,options);return;};Mapifies.RemoveFeed=function(element,feed,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(feed);if(typeof callback=='function')return callback(feed);return;};Mapifies.AddGroundOverlay=function(element,options,callback){function defaults(){return{'overlaySouthWestBounds':undefined,'overlayNorthEastBounds':undefined,'overlayImage':undefined};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var boundries=new GLatLngBounds(new GLatLng(options.overlaySouthWestBounds[0],options.overlaySouthWestBounds[1]),new GLatLng(options.overlayNorthEastBounds[0],options.overlayNorthEastBounds[1]));groundOverlay=new GGroundOverlay(options.overlayImage,boundries);thisMap.addOverlay(groundOverlay);if(typeof callback=='function')return callback(groundOverlay,options);return;};Mapifies.RemoveGroundOverlay=function(element,groundOverlay,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(groundOverlay);if(typeof callback==='function')return callback(groundOverlay);return;};Mapifies.AddMarker=function(element,options,callback){function defaults(){var values={'pointLatLng':undefined,'pointHTML':undefined,'pointOpenHTMLEvent':'click','pointIsDraggable':false,'pointIsRemovable':false,'pointRemoveEvent':'dblclick','pointMinZoom':4,'pointMaxZoom':17,'pointIcon':undefined,'centerMap':false,'centerMoveMethod':'normal'};return values;};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend({},defaults(),options);var markerOptions={}
if(typeof options.pointIcon=='object')
jQuery.extend(markerOptions,{'icon':options.pointIcon});if(options.pointIsDraggable)
jQuery.extend(markerOptions,{'draggable':options.pointIsDraggable});if(options.centerMap){switch(options.centerMoveMethod){case'normal':thisMap.setCenter(new GLatLng(options.pointLatLng[0],options.pointLatLng[1]));break;case'pan':thisMap.panTo(new GLatLng(options.pointLatLng[0],options.pointLatLng[1]));break;}}
var marker=new GMarker(new GLatLng(options.pointLatLng[0],options.pointLatLng[1]),markerOptions);if(options.pointHTML)
GEvent.addListener(marker,options.pointOpenHTMLEvent,function(){marker.openInfoWindowHtml(options.pointHTML,{maxContent:options.pointMaxContent,maxTitle:options.pointMaxTitle});});if(options.pointIsRemovable)
GEvent.addListener(marker,options.pointRemoveEvent,function(){thisMap.removeOverlay(marker);});if(thisMap.MarkerManager){thisMap.MarkerManager.addMarker(marker,options.pointMinZoom,options.pointMaxZoom);}else{thisMap.addOverlay(marker);}
if(typeof callback=='function')return callback(marker,options);return;};Mapifies.RemoveMarker=function(element,marker,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(marker);if(typeof callback==='function')return callback(marker);return;};Mapifies.CreateMarkerManager=function(element,options,callback){function defaults(){return{'markerManager':'GMarkerManager','borderPadding':100,'maxZoom':17,'trackMarkers':false}}
var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var markerManagerOptions={'borderPadding':options.borderPadding,'maxZoom':options.maxZoom,'trackMarkers':options.trackMarkers}
var markerManager=new window[options.markerManager](thisMap,options);Mapifies.MapObjects.Append(element,'MarkerManager',markerManager);if(typeof callback=='function')return callback(markerManager,options);};Mapifies.AddPolygon=function(element,options,callback){function defaults(){return{'polygonPoints':[],'polygonStrokeColor':"#000000",'polygonStrokeWeight':5,'polygonStrokeOpacity':1,'polygonFillColor':"#ff0000",'polygonFillOpacity':1,'mapCenter':undefined,'polygonClickable':true}}
var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var polygonOptions={};if(!options.polygonClickable)
polygonOptions=jQuery.extend(polygonOptions,{clickable:false});if(typeof options.mapCenter!=='undefined'&&options.mapCenter[0]&&options.mapCenter[1])
thisMap.setCenter(new GLatLng(options.mapCenter[0],options.mapCenter[1]));var allPoints=[];jQuery.each(options.polygonPoints,function(i,point){allPoints.push(new GLatLng(point[0],point[1]));});var polygon=new GPolygon(allPoints,options.polygonStrokeColor,options.polygonStrokeWeight,options.polygonStrokeOpacity,options.polygonFillColor,options.polygonFillOpacity,polygonOptions);thisMap.addOverlay(polygon);if(typeof callback=='function')return callback(polygon,polygonOptions,options);return;}
Mapifies.RemovePolygon=function(element,polygon,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(polygon);if(typeof callback==='function')return callback(polygon);return;};Mapifies.AddPolyline=function(element,options,callback){function defaults(){return{'polylinePoints':[],'polylineStrokeColor':"#ff0000",'polylineStrokeWidth':10,'polylineStrokeOpacity':1,'mapCenter':[],'polylineGeodesic':false,'polylineClickable':true};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var polyLineOptions={};if(options.polylineGeodesic)
jQuery.extend(polyLineOptions,{geodesic:true});if(!options.polylineClickable)
jQuery.extend(polyLineOptions,{clickable:false});if(options.mapCenter[0]&&options.mapCenter[1])
thisMap.setCenter(new GLatLng(options.mapCenter[0],options.mapCenter[1]));var allPoints=[];jQuery.each(options.polylinePoints,function(i,point){allPoints.push(new GLatLng(point[0],point[1]));});var polyline=new GPolyline(allPoints,options.polylineStrokeColor,options.polylineStrokeWidth,options.polylineStrokeOpacity,polyLineOptions);thisMap.addOverlay(polyline);if(typeof callback=='function')return callback(polyline,polyLineOptions,options);return;}
Mapifies.RemovePolyline=function(element,polyline,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(polyline);if(typeof callback==='function')return callback(polyline);return;};Mapifies.AddScreenOverlay=function(element,options,callback){function defaults(){return{'imageUrl':'','screenXY':[],'overlayXY':[],'size':[]};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var overlay=new GScreenOverlay(options.imageUrl,new GScreenPoint(options.screenXY[0],options.screenXY[1]),new GScreenPoint(options.overlayXY[0],options.overlayXY[1]),new GScreenSize(options.size[0],options.size[1]));thisMap.addOverlay(overlay);if(typeof callback=='function')return callback(overlay,options);};Mapifies.RemoveScreenOverlay=function(element,overlay,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(overlay);if(typeof callback==='function')return callback(overlay);return;};Mapifies.CreateStreetviewPanorama=function(element,options,callback){function defaults(){return{'overideContainer':'','latlng':[40.75271883902363,-73.98262023925781],'pov':[]}};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var container=null;if(options.overideContainer!==''){container=jQuery(options.overideContainer).get(0);}else{container=jQuery(element).get(0);}
var viewOptions={};if(options.pov.length>0){jQuery.extend(viewOptions,{'pov':new GPov(options.latlng[0],options.latlng[1],options.latlng[2])});}
if(options.latlng.length>0){jQuery.extend(viewOptions,{'latlng':new GLatLng(options.latlng[0],options.latlng[1])});}
var overlay=new GStreetviewPanorama(container,viewOptions);if(typeof callback=='function')return callback(overlay,options);return;};Mapifies.RemoveStreetviewPanorama=function(element,view,callback){var thisMap=Mapifies.MapObjects.Get(element);view.remove();if(typeof callback=='function')return callback(view);return;};Mapifies.AddTrafficInfo=function(element,options,callback){function defaults(){return{'mapCenter':[]};};var thisMap=Mapifies.MapObjects.Get(element);options=jQuery.extend(defaults(),options);var trafficOverlay=new GTrafficOverlay;thisMap.addOverlay(trafficOverlay);if(options.mapCenter[0]&&options.mapCenter[1]){thisMap.setCenter(new GLatLng(options.mapCenter[0],options.mapCenter[1]));}
if(typeof callback=='function')return callback(trafficOverlay,options);};Mapifies.RemoveTrafficInfo=function(element,trafficOverlay,callback){var thisMap=Mapifies.MapObjects.Get(element);thisMap.removeOverlay(trafficOverlay);if(typeof callback==='function')return callback(trafficOverlay);return;};Mapifies.Copyright={};Mapifies.AddCopyright=function(element,options,callback){function defaults(){return{'copyrightCollectionPrefix':'&copy; ','copyrightID':null,'copyrightBounds':null,'copyrightMinZoom':null,'copyrightText':null}};options=jQuery.extend(defaults(),options);var boundSW=options.copyrightBounds[0];var boundNE=options.copyrightBounds[1];var copyright=new GCopyright(options.copyrightID,new GLatLngBounds(new GLatLng(boundSW[0],boundSW[1]),new GLatLng(boundNE[0],boundNE[1])),options.copyrightMinZoom,options.copyrightText);var copyrightCollection=new GCopyrightCollection(options.copyrightCollectionPrefix);copyrightCollection.addCopyright(copyright);if(typeof callback==='function')return callback(copyrightCollection,copyright,options);};Mapifies.SearchCode=function(code){switch(code){case G_GEO_SUCCESS:return{'code':G_GEO_SUCCESS,'success':true,'message':'Success'};case G_GEO_UNKNOWN_ADDRESS:return{'code':G_GEO_UNKNOWN_ADDRESS,'success':false,'message':'No corresponding geographic location could be found for one of the specified addresses. This may be due to the fact that the address is relatively new, or it may be incorrect'};break;case G_GEO_SERVER_ERROR:return{'code':G_GEO_UNKNOWN_ADDRESS,'success':false,'message':'A geocoding or directions request could not be successfully processed, yet the exact reason for the failure is not known.'};break;case G_GEO_MISSING_QUERY:return{'code':G_GEO_UNKNOWN_ADDRESS,'success':false,'message':'The HTTP q parameter was either missing or had no value. For geocoder requests, this means that an empty address was specified as input. For directions requests, this means that no query was specified in the input.'};break;case G_GEO_BAD_KEY:return{'code':G_GEO_UNKNOWN_ADDRESS,'success':false,'message':'The given key is either invalid or does not match the domain for which it was given.'};break;case G_GEO_BAD_REQUEST:return{'code':G_GEO_UNKNOWN_ADDRESS,'success':false,'message':'A directions request could not be successfully parsed.'};break;default:return{'code':null,'success':false,'message':'An unknown error occurred.'};break;};}
Mapifies.GetTravelMode=function(travelMode){switch(travelMode){case'driving':travelMode=G_TRAVEL_MODE_DRIVING;break;case'walking':travelMode=G_TRAVEL_MODE_WALKING;break;};return travelMode;};Mapifies.createIcon=function(options){function defaults(){return{'iconImage':undefined,'iconShadow':undefined,'iconSize':undefined,'iconShadowSize':undefined,'iconAnchor':undefined,'iconInfoWindowAnchor':undefined,'iconPrintImage':undefined,'iconMozPrintImage':undefined,'iconPrintShadow':undefined,'iconTransparent':undefined};};options=jQuery.extend(defaults(),options);var icon=new GIcon(G_DEFAULT_ICON);if(options.iconImage)
icon.image=options.iconImage;if(options.iconShadow)
icon.shadow=options.iconShadow;if(options.iconSize)
icon.iconSize=options.iconSize;if(options.iconShadowSize)
icon.shadowSize=options.iconShadowSize;if(options.iconAnchor)
icon.iconAnchor=options.iconAnchor;if(options.iconInfoWindowAnchor)
icon.infoWindowAnchor=options.iconInfoWindowAnchor;return icon;};Mapifies.getCenter=function(element){var thisMap=Mapifies.MapObjects.Get(element);return thisMap.getCenter();};Mapifies.getBounds=function(element){var thisMap=Mapifies.MapObjects.Get(element);return thisMap.getBounds();};var Mapifies;if(!Mapifies)Mapifies={};(function($){$.fn.jmap=function(method,options,callback){return this.each(function(){if(method=='init'&&typeof options=='undefined'){new Mapifies.Initialise(this,{},null);}else if(method=='init'&&typeof options=='object'){new Mapifies.Initialise(this,options,callback);}else if(method=='init'&&typeof options=='function'){new Mapifies.Initialise(this,{},options);}else if(typeof method=='object'||method==null){new Mapifies.Initialise(this,method,options);}else{try{new Mapifies[method](this,options,callback);}catch(err){throw Error('Mapifies Function Does Not Exist');}}});}})(jQuery);;jQuery.fn.extend({mapping:function(vars){var defaults={dataset:null,geo:0,ent:0,value:"actual",version:"actual",display:"amt",y1:null,y2:null,m1:null,m2:null,level:2,series:"year",decimal:3,target:null};vars=$.extend(defaults,vars);if(vars.dataset==null)
{this.append("Error: Map dataset parameter invalid")
return}
if(vars.geo==null)
{this.append("Error: Map geography parameter invalid")
return}
if(vars.target==null)
{this.append("Error: Map target selector parameter invalid")
return}
var mapp=$(vars.target);$.getJSON(baseURL+"mapping/markers",vars,function(data){mapp.jmap("init",{"mapType":G_HYBRID_MAP,"mapCenter":[data.mapcenter.latitude,data.mapcenter.longitude],"mapZoom":Number(data.mapcenter.zoom),"mapShowjMapsIcon":false})
$.each(data.markers,function(i,item){mapp.jmap('AddMarker',{'pointLatLng':[item.latitude,item.longitude],'pointHTML':item.name+": please click the marker again ...",'pointMinZoom':1},function(mapp,marker,options){GEvent.addListener(mapp,"click",function(){vars.geo=item.id
$.get(baseURL+"mapping/content",vars,function(data){marker.pointHTML='<div class="ui-widget-content ui-corner-all" style="padding:1px">'+data+"</div>"},"html")})})})})}});jQuery.fn.extend({tableReport:function(vars){var defaults={dataset:null,geo:0,ent:0,value:"actual",version:"actual",display:"amt",y1:null,y2:null,m1:null,m2:null,level:5,series:null,decimal:3,target:null};vars=$.extend(defaults,vars);if(vars.dataset==null)
{this.append("Error: report dataset parameter invalid")
return}
if(vars.series==null)
{this.append("Error: report dataset parameter invalid")
return}
if(vars.target==null)
{this.append("Error: report target selector parameter invalid")
return}
$.ajax({type:"GET",url:baseURL+"mapping/content",data:vars,success:function(data){$(vars.target).html(data)}})}});var swfobject=function(){var b="undefined",Q="object",n="Shockwave Flash",p="ShockwaveFlash.ShockwaveFlash",P="application/x-shockwave-flash",m="SWFObjectExprInst",j=window,K=document,T=navigator,o=[],N=[],i=[],d=[],J,Z=null,M=null,l=null,e=false,A=false;var h=function(){var v=typeof K.getElementById!=b&&typeof K.getElementsByTagName!=b&&typeof K.createElement!=b,AC=[0,0,0],x=null;if(typeof T.plugins!=b&&typeof T.plugins[n]==Q){x=T.plugins[n].description;if(x&&!(typeof T.mimeTypes!=b&&T.mimeTypes[P]&&!T.mimeTypes[P].enabledPlugin)){x=x.replace(/^.*\s+(\S+\s+\S+$)/,"$1");AC[0]=parseInt(x.replace(/^(.*)\..*$/,"$1"),10);AC[1]=parseInt(x.replace(/^.*\.(.*)\s.*$/,"$1"),10);AC[2]=/r/.test(x)?parseInt(x.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof j.ActiveXObject!=b){var y=null,AB=false;try{y=new ActiveXObject(p+".7")}catch(t){try{y=new ActiveXObject(p+".6");AC=[6,0,21];y.AllowScriptAccess="always"}catch(t){if(AC[0]==6){AB=true}}if(!AB){try{y=new ActiveXObject(p)}catch(t){}}}if(!AB&&y){try{x=y.GetVariable("$version");if(x){x=x.split(" ")[1].split(",");AC=[parseInt(x[0],10),parseInt(x[1],10),parseInt(x[2],10)]}}catch(t){}}}}var AD=T.userAgent.toLowerCase(),r=T.platform.toLowerCase(),AA=/webkit/.test(AD)?parseFloat(AD.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,q=false,z=r?/win/.test(r):/win/.test(AD),w=r?/mac/.test(r):/mac/.test(AD);return{w3cdom:v,pv:AC,webkit:AA,ie:q,win:z,mac:w}}();var L=function(){if(!h.w3cdom){return}f(H);if(h.ie&&h.win){try{K.write("<script id=__ie_ondomload defer=true src=//:><\/script>");J=C("__ie_ondomload");if(J){I(J,"onreadystatechange",S)}}catch(q){}}if(h.webkit&&typeof K.readyState!=b){Z=setInterval(function(){if(/loaded|complete/.test(K.readyState)){E()}},10)}if(typeof K.addEventListener!=b){K.addEventListener("DOMContentLoaded",E,null)}R(E)}();function S(){if(J.readyState=="complete"){J.parentNode.removeChild(J);E()}}function E(){if(e){return}if(h.ie&&h.win){var v=a("span");try{var u=K.getElementsByTagName("body")[0].appendChild(v);u.parentNode.removeChild(u)}catch(w){return}}e=true;if(Z){clearInterval(Z);Z=null}var q=o.length;for(var r=0;r<q;r++){o[r]()}}function f(q){if(e){q()}else{o[o.length]=q}}function R(r){if(typeof j.addEventListener!=b){j.addEventListener("load",r,false)}else{if(typeof K.addEventListener!=b){K.addEventListener("load",r,false)}else{if(typeof j.attachEvent!=b){I(j,"onload",r)}else{if(typeof j.onload=="function"){var q=j.onload;j.onload=function(){q();r()}}else{j.onload=r}}}}}function H(){var t=N.length;for(var q=0;q<t;q++){var u=N[q].id;if(h.pv[0]>0){var r=C(u);if(r){N[q].width=r.getAttribute("width")?r.getAttribute("width"):"0";N[q].height=r.getAttribute("height")?r.getAttribute("height"):"0";if(c(N[q].swfVersion)){if(h.webkit&&h.webkit<312){Y(r)}W(u,true)}else{if(N[q].expressInstall&&!A&&c("6.0.65")&&(h.win||h.mac)){k(N[q])}else{O(r)}}}}else{W(u,true)}}}function Y(t){var q=t.getElementsByTagName(Q)[0];if(q){var w=a("embed"),y=q.attributes;if(y){var v=y.length;for(var u=0;u<v;u++){if(y[u].nodeName=="DATA"){w.setAttribute("src",y[u].nodeValue)}else{w.setAttribute(y[u].nodeName,y[u].nodeValue)}}}var x=q.childNodes;if(x){var z=x.length;for(var r=0;r<z;r++){if(x[r].nodeType==1&&x[r].nodeName=="PARAM"){w.setAttribute(x[r].getAttribute("name"),x[r].getAttribute("value"))}}}t.parentNode.replaceChild(w,t)}}function k(w){A=true;var u=C(w.id);if(u){if(w.altContentId){var y=C(w.altContentId);if(y){M=y;l=w.altContentId}}else{M=G(u)}if(!(/%$/.test(w.width))&&parseInt(w.width,10)<310){w.width="310"}if(!(/%$/.test(w.height))&&parseInt(w.height,10)<137){w.height="137"}K.title=K.title.slice(0,47)+" - Flash Player Installation";var z=h.ie&&h.win?"ActiveX":"PlugIn",q=K.title,r="MMredirectURL="+j.location+"&MMplayerType="+z+"&MMdoctitle="+q,x=w.id;if(h.ie&&h.win&&u.readyState!=4){var t=a("div");x+="SWFObjectNew";t.setAttribute("id",x);u.parentNode.insertBefore(t,u);u.style.display="none";var v=function(){u.parentNode.removeChild(u)};I(j,"onload",v)}U({data:w.expressInstall,id:m,width:w.width,height:w.height},{flashvars:r},x)}}function O(t){if(h.ie&&h.win&&t.readyState!=4){var r=a("div");t.parentNode.insertBefore(r,t);r.parentNode.replaceChild(G(t),r);t.style.display="none";var q=function(){t.parentNode.removeChild(t)};I(j,"onload",q)}else{t.parentNode.replaceChild(G(t),t)}}function G(v){var u=a("div");if(h.win&&h.ie){u.innerHTML=v.innerHTML}else{var r=v.getElementsByTagName(Q)[0];if(r){var w=r.childNodes;if(w){var q=w.length;for(var t=0;t<q;t++){if(!(w[t].nodeType==1&&w[t].nodeName=="PARAM")&&!(w[t].nodeType==8)){u.appendChild(w[t].cloneNode(true))}}}}}return u}function U(AG,AE,t){var q,v=C(t);if(v){if(typeof AG.id==b){AG.id=t}if(h.ie&&h.win){var AF="";for(var AB in AG){if(AG[AB]!=Object.prototype[AB]){if(AB.toLowerCase()=="data"){AE.movie=AG[AB]}else{if(AB.toLowerCase()=="styleclass"){AF+=' class="'+AG[AB]+'"'}else{if(AB.toLowerCase()!="classid"){AF+=" "+AB+'="'+AG[AB]+'"'}}}}}var AD="";for(var AA in AE){if(AE[AA]!=Object.prototype[AA]){AD+='<param name="'+AA+'" value="'+AE[AA]+'" />'}}v.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AF+">"+AD+"</object>";i[i.length]=AG.id;q=C(AG.id)}else{if(h.webkit&&h.webkit<312){var AC=a("embed");AC.setAttribute("type",P);for(var z in AG){if(AG[z]!=Object.prototype[z]){if(z.toLowerCase()=="data"){AC.setAttribute("src",AG[z])}else{if(z.toLowerCase()=="styleclass"){AC.setAttribute("class",AG[z])}else{if(z.toLowerCase()!="classid"){AC.setAttribute(z,AG[z])}}}}}for(var y in AE){if(AE[y]!=Object.prototype[y]){if(y.toLowerCase()!="movie"){AC.setAttribute(y,AE[y])}}}v.parentNode.replaceChild(AC,v);q=AC}else{var u=a(Q);u.setAttribute("type",P);for(var x in AG){if(AG[x]!=Object.prototype[x]){if(x.toLowerCase()=="styleclass"){u.setAttribute("class",AG[x])}else{if(x.toLowerCase()!="classid"){u.setAttribute(x,AG[x])}}}}for(var w in AE){if(AE[w]!=Object.prototype[w]&&w.toLowerCase()!="movie"){F(u,w,AE[w])}}v.parentNode.replaceChild(u,v);q=u}}}return q}function F(t,q,r){var u=a("param");u.setAttribute("name",q);u.setAttribute("value",r);t.appendChild(u)}function X(r){var q=C(r);if(q&&(q.nodeName=="OBJECT"||q.nodeName=="EMBED")){if(h.ie&&h.win){if(q.readyState==4){B(r)}else{j.attachEvent("onload",function(){B(r)})}}else{q.parentNode.removeChild(q)}}}function B(t){var r=C(t);if(r){for(var q in r){if(typeof r[q]=="function"){r[q]=null}}r.parentNode.removeChild(r)}}function C(t){var q=null;try{q=K.getElementById(t)}catch(r){}return q}function a(q){return K.createElement(q)}function I(t,q,r){t.attachEvent(q,r);d[d.length]=[t,q,r]}function c(t){var r=h.pv,q=t.split(".");q[0]=parseInt(q[0],10);q[1]=parseInt(q[1],10)||0;q[2]=parseInt(q[2],10)||0;return(r[0]>q[0]||(r[0]==q[0]&&r[1]>q[1])||(r[0]==q[0]&&r[1]==q[1]&&r[2]>=q[2]))?true:false}function V(v,r){if(h.ie&&h.mac){return}var u=K.getElementsByTagName("head")[0],t=a("style");t.setAttribute("type","text/css");t.setAttribute("media","screen");if(!(h.ie&&h.win)&&typeof K.createTextNode!=b){t.appendChild(K.createTextNode(v+" {"+r+"}"))}u.appendChild(t);if(h.ie&&h.win&&typeof K.styleSheets!=b&&K.styleSheets.length>0){var q=K.styleSheets[K.styleSheets.length-1];if(typeof q.addRule==Q){q.addRule(v,r)}}}function W(t,q){var r=q?"visible":"hidden";if(e&&C(t)){C(t).style.visibility=r}else{V("#"+t,"visibility:"+r)}}function g(s){var r=/[\\\"<>\.;]/;var q=r.exec(s)!=null;return q?encodeURIComponent(s):s}var D=function(){if(h.ie&&h.win){window.attachEvent("onunload",function(){var w=d.length;for(var v=0;v<w;v++){d[v][0].detachEvent(d[v][1],d[v][2])}var t=i.length;for(var u=0;u<t;u++){X(i[u])}for(var r in h){h[r]=null}h=null;for(var q in swfobject){swfobject[q]=null}swfobject=null})}}();return{registerObject:function(u,q,t){if(!h.w3cdom||!u||!q){return}var r={};r.id=u;r.swfVersion=q;r.expressInstall=t?t:false;N[N.length]=r;W(u,false)},getObjectById:function(v){var q=null;if(h.w3cdom){var t=C(v);if(t){var u=t.getElementsByTagName(Q)[0];if(!u||(u&&typeof t.SetVariable!=b)){q=t}else{if(typeof u.SetVariable!=b){q=u}}}}return q},embedSWF:function(x,AE,AB,AD,q,w,r,z,AC){if(!h.w3cdom||!x||!AE||!AB||!AD||!q){return}AB+="";AD+="";if(c(q)){W(AE,false);var AA={};if(AC&&typeof AC===Q){for(var v in AC){if(AC[v]!=Object.prototype[v]){AA[v]=AC[v]}}}AA.data=x;AA.width=AB;AA.height=AD;var y={};if(z&&typeof z===Q){for(var u in z){if(z[u]!=Object.prototype[u]){y[u]=z[u]}}}if(r&&typeof r===Q){for(var t in r){if(r[t]!=Object.prototype[t]){if(typeof y.flashvars!=b){y.flashvars+="&"+t+"="+r[t]}else{y.flashvars=t+"="+r[t]}}}}f(function(){U(AA,y,AE);if(AA.id==AE){W(AE,true)}})}else{if(w&&!A&&c("6.0.65")&&(h.win||h.mac)){A=true;W(AE,false);f(function(){var AF={};AF.id=AF.altContentId=AE;AF.width=AB;AF.height=AD;AF.expressInstall=w;k(AF)})}}},getFlashPlayerVersion:function(){return{major:h.pv[0],minor:h.pv[1],release:h.pv[2]}},hasFlashPlayerVersion:c,createSWF:function(t,r,q){if(h.w3cdom){return U(t,r,q)}else{return undefined}},removeSWF:function(q){if(h.w3cdom){X(q)}},createCSS:function(r,q){if(h.w3cdom){V(r,q)}},addDomLoadEvent:f,addLoadEvent:R,getQueryParamValue:function(v){var u=K.location.search||K.location.hash;if(v==null){return g(u)}if(u){var t=u.substring(1).split("&");for(var r=0;r<t.length;r++){if(t[r].substring(0,t[r].indexOf("="))==v){return g(t[r].substring((t[r].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(A&&M){var q=C(m);if(q){q.parentNode.replaceChild(M,q);if(l){W(l,true);if(h.ie&&h.win){M.style.display="block"}}M=null;l=null;A=false}}}}}();;jQuery.chart=function(target,json_url,options){var defaults={swf_path:baseURL+"assets/ofc2/open-flash-chart.swf",width:"100%",height:320};options=$.extend(defaults,options)
if(target===null){alert("Chart #tag was null")
return}
if(typeof(swfobject)=="undefined"){alert("swfobject unavailable! charting skipped.")
return}
var font=$('.ui-widget').css('font-family')
swfobject.embedSWF(options.swf_path,target,options.width,options.height,"9.0.0","expressInstall.swf",{"data-file":$.URLEncode(json_url+'&font='+font),"id":target})}
jQuery.OFC={upload_url:function(id){return'/eids2/flash_chart/save_as/chart'+id+'.png'},binary:function(src){return jQuery('#'+src)[0].get_img_binary()},upload:function(id){jQuery.ajax({type:"POST",url:this.upload_url(id),data:{"content":this.binary(id)},contentType:'application/octet-stream',processData:false,dataType:"text",success:function(){$.OFC.saveAs(id)}})},saveAs:function(id){window.location='/eids2/application/tmp/chart'+id+'.png'},rasterize:function(src,dst){$('#'+dst).replaceWith($.OFC.image(src))
alert("Flash graphic converted to image. Right click on the chart again and choose \"Save Image As\"")},image:function(src){return"<img src='data:image/png;base64,"+$('#'+src)[0].get_img_binary()+"' />"},save:function(src){this.rasterize(src,src)}}
function save_image(id){$.OFC.save(id)}
$.extend({URLEncode:function(c){var o='';var x=0;c=c.toString();var r=/(^[a-zA-Z0-9_.]*)/;while(x<c.length){var m=r.exec(c.substr(x));if(m!=null&&m.length>1&&m[1]!=''){o+=m[1];x+=m[1].length;}else{if(c[x]==' ')o+='+';else{var d=c.charCodeAt(x);var h=d.toString(16);o+='%'+(h.length<2?'0':'')+h.toUpperCase();}
x++;}}
return o;},URLDecode:function(s){var o=s;var binVal,t;var r=/(%[^%]{2})/;while((m=r.exec(o))!=null&&m.length>1&&m[1]!=''){b=parseInt(m[1].substr(1),16);t=String.fromCharCode(b);o=o.replace(m[1],t);}
return o;}});;$(document).ready(function(){$("#dashboard_sorter").button({button:"ui-icon-arrow-4"}).click(function(){$(".sortable").sortable({connectWith:".sortable",placeholder:"portlet-placeholder",cursor:'move'});});$("#sort_saver").button({button:"ui-icon-disk"}).click(function(){var i=1;var result='';$(".sortable").each(function(){result+='&'+$(this).sortable('serialize',{key:'col_'+i+'[]'});i++;});$.ajax({type:"POST",url:$().baseURL()+"dashboard_request/save_sorting",data:result,success:function(msg){$("#sort_saver").prepend(" New Ordering Saved "+msg);}});});$("#portlet_toggler").button({button:"ui-icon-carat-2-n-s"}).click(function(){$(".portlet").each(function(){$(this).find(".portlet-content").toggle();});});$("td[width=80]").each(function(){if(this.text()==''){this.width(0)}})});;